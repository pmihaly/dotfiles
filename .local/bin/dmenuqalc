#!/bin/sh

# dmenu "frontend" for qalc

# multiple expressions can be separated by a semicolon

input="$(dmenu -p "qalc: " < /dev/null)"

[ -n "$input" ] && echo "$input" |  # only run if user gave something
    sed "s/\s*;\s*/\n/g" |          # replace semicolon (with optional whitespace around it) with newline
    qalc -t -c0 -n |                # terse, no color output
    grep "^\s.*" |                  # select lines starting with whitespace (there is the result)
    sed 's/^\s*//g' |               # remove whitespace from the beginning of the lines
    dmenu > /dev/null               # if given multiple expressions, each selectable item is the output of each expression
