#!/bin/sh

# Quickly connect by ssh to any server specified in ~/sync/servers, also checking their status in the preview
# Depends on: ~/sync/servers (newline separated list of 'username@hostname'), fzf and netcat

fzf  --preview='ssh -q -o BatchMode=yes -o StrictHostKeyChecking=no {} "exit 0" && echo "ðŸŸ¢ Online" || echo "ðŸ”´ Offline (check on port 22 failed)"' \
< ~/sync/servers |
xargs -I{} ssh -tt "{}"
